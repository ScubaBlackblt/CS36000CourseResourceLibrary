<html>
    <head>
        <link rel="stylesheet" href="componentCSS.css">
    </head>

    <body>

    </body>

    <script>
        
        const triggerDiv = document.createElement('div');
        triggerDiv.className = "trigger-div"; 
        document.body.appendChild(triggerDiv);
        
        const triggerButton = document.createElement('button');
        triggerButton.innerText = '+';
        triggerButton.className = "trigger";
        triggerDiv.appendChild(triggerButton);
        
        const listDiv = document.createElement('div');
        listDiv.className = "list-div";
        document.body.appendChild(listDiv);

        const modal = document.createElement('div');
        modal.className = "modal";
        document.body.appendChild(modal);

        const modalContents = document.createElement('div');
        modalContents.className= "modal-contents";
        modal.appendChild(modalContents);

        const imageButton = document.createElement('button');
        imageButton.innerText = 'Image';
        imageButton.className = "add-image";
        modalContents.appendChild(imageButton);

        const fileButton = document.createElement('button');
        fileButton.innerText = 'File';
        fileButton.className = "add-file";
        modalContents.appendChild(fileButton);

        const textButton = document.createElement('button');
        textButton.innerText = 'Text';
        textButton.className = "add-text";
        modalContents.appendChild(textButton);

        const submissionButton = document.createElement('button');
        submissionButton.innerText = 'Submission';
        submissionButton.className = "add-submission";
        modalContents.appendChild(submissionButton);

        var userText = document.createElement("INPUT");
        userText.setAttribute("type", "text");
        userText.className = "text-input";
        modalContents.appendChild(userText);

        var selectedFile = document.createElement("INPUT");
        selectedFile.setAttribute("type", "file");
        selectedFile.className = "selected-file";
        modalContents.appendChild(selectedFile);

        const fileSubmitButton = document.createElement('button');
        fileSubmitButton.innerText = 'Submit';
        fileSubmitButton.className = "submit-file";
        modalContents.appendChild(fileSubmitButton);

        const textSubmitButton = document.createElement('button');
        textSubmitButton.innerText = 'Submit';
        textSubmitButton.className = "submit-text";
        modalContents.appendChild(textSubmitButton);

        const closeButton = document.createElement('span');
        closeButton.innerText = 'x';
        closeButton.className = "close-button";
        modalContents.appendChild(closeButton);


        triggerButton.addEventListener('click', () => {
            modal.classList.toggle("show-modal");
            selectedFile.style.visibility = 'hidden';
            userText.value = userText.defaultValue;
        })

        window.addEventListener('click', () => {
            if(event.target === modal) {
                modal.classList.toggle("show-modal");
            }
        })

        imageButton.addEventListener('click', () => {
            selectedFile.style.visibility = 'visible';
            userText.style.visibility = 'hidden';
            textSubmitButton.style.visibility = 'hidden';

            let pickedImg = selectedFile.src;
        })

        fileButton.addEventListener('click', () => {
            selectedFile.style.visibility = 'visible';
            fileSubmitButton.style.visibility = 'visible';
            userText.style.visibility = 'hidden';
            textSubmitButton.style.visibility = 'hidden';
        })

        fileSubmitButton.addEventListener('click', () => {
            var file = selectedFile.files[0].name;
            let fileNameInput = document.createTextNode(file);

            modal.classList.toggle("show-modal");
            addToList(fileNameInput);
        })

        textButton.addEventListener('click', () => {
            selectedFile.style.visibility = 'hidden';
            fileSubmitButton.style.visibility = 'hidden';
            userText.style.visibility = 'visible';
            textSubmitButton.style.visibility = 'visible';

        })

        textSubmitButton.addEventListener('click', () => {
            userInput = userText.value;
            let insertTextInput = document.createTextNode(userInput);

            modal.classList.toggle("show-modal");
            addToList(insertTextInput);
        })

        function addToList(child) {
            const list = document.createElement("li");
            list.style.listStyle = "none"
            list.appendChild(child);
            if(listDiv.hasChildNodes()) {
                listDiv.insertBefore(list, listDiv.firstChild);
            }
            else {
                listDiv.appendChild(list);
            }
        }
    </script>
</html>
